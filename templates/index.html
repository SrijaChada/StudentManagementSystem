{% extends 'base.html' %}
{% block content %}
  <div class="search-bar">
    <form class="d-flex flex-grow-1" method="get" action="{{ url_for('index') }}" style="gap: 10px;">
      <input class="form-control" type="search" placeholder="ðŸ” Search by name, roll, or department..." aria-label="Search" name="q" value="{{ request.args.get('q','') }}">
      <button class="btn btn-primary" type="submit">
        <i class="fas fa-search"></i> Search
      </button>
    </form>
    <a class="btn btn-primary" href="{{ url_for('add_student') }}">
      <i class="fas fa-plus-circle"></i> Add Student
    </a>
  </div>

  <div style="overflow-x: auto;">
    <table class="table table-hover">
      <thead>
        <tr>
          <th><i class="fas fa-id-card"></i> Roll</th>
          <th><i class="fas fa-user"></i> Name</th>
          <th><i class="fas fa-building"></i> Department</th>
          <th><i class="fas fa-calendar"></i> Year</th>
          <th><i class="fas fa-envelope"></i> Email</th>
          <th style="text-align: center;"><i class="fas fa-cogs"></i> Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for s in students %}
        <tr>
          <td><strong>{{ s.roll }}</strong></td>
          <td>{{ s.name }}</td>
          <td><span class="badge bg-info">{{ s.department }}</span></td>
          <td><span class="badge bg-secondary">Year {{ s.year }}</span></td>
          <td>{{ s.email }}</td>
          <td style="text-align: center;">
            <a class="btn btn-sm btn-info" href="{{ url_for('view_student', student_id=s.id) }}" title="View">
              <i class="fas fa-eye"></i>
            </a>
            <a class="btn btn-sm btn-warning" href="{{ url_for('edit_student', student_id=s.id) }}" title="Edit">
              <i class="fas fa-edit"></i>
            </a>
            <a class="btn btn-sm btn-danger" href="{{ url_for('delete_student', student_id=s.id) }}" onclick="return confirm('Are you sure you want to delete this student?');" title="Delete">
              <i class="fas fa-trash"></i>
            </a>
          </td>
        </tr>
        {% else %}
        <tr>
          <td colspan="6" style="text-align: center; padding: 40px;">
            <i class="fas fa-inbox" style="font-size: 2rem; color: #bdc3c7; margin-bottom: 10px;"></i>
            <p style="color: #7f8c8d; font-size: 1.1rem;">No students found.</p>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}
